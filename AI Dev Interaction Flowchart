%% MermaidJS sequence diagram â€” AI Dev Interaction Flowchart
%% Shows both the traditional chat-LLM workflow and the modern agentic tool workflow

sequenceDiagram
    participant User as ğŸ‘¤ User / Product Owner
    participant Template as ğŸ“‹ Prompt Template
    participant Tool as ğŸ¤– AI Coding Tool<br/>(Cursor / Claude Code / Replit / Codex)
    participant Env as ğŸ–¥ï¸ Execution Environment<br/>(IDE / Terminal / Cloud Sandbox)

    User->>Template: Fill in requirements (user stories, tech stack, deployment target)
    Template->>Tool: Submit structured prompt

    Tool-->>User: Clarifying questions (if any)
    User-->>Tool: Answers / additional context

    Tool-->>User: MermaidJS architecture diagram
    User-->>Tool: Approve or revise architecture

    %% Agentic tool path (Cursor, Claude Code, Replit Agent, Codex)
    rect rgb(220, 240, 255)
        Note over Tool, Env: Agentic Tool Path (Cursor, Claude Code, Replit, Codex)
        Tool->>Env: Write code, install deps, run tests
        Env-->>Tool: Output / errors / test results
        loop Agent self-corrects autonomously
            Tool->>Env: Apply fix, re-run
            Env-->>Tool: Updated results
        end
        Tool-->>User: Working solution ready for review
        User-->>Tool: Feedback / redirect / approve
    end

    %% Traditional chat LLM path (ChatGPT, Claude.ai)
    rect rgb(255, 245, 220)
        Note over User, Tool: Traditional Chat LLM Path (ChatGPT, Claude.ai)
        Tool-->>User: Initial code response
        User->>Env: Manually run code in local IDE
        loop Manual iteration
            Env-->>User: Error messages / unexpected output
            User->>Tool: Paste errors + feedback
            Tool-->>User: Refined code
            User->>Env: Run again
        end
        alt Context window exhausted
            User->>Tool: Start new chat
            User->>Tool: Re-submit refined prompt + attach current code
            Tool-->>User: Continues from current state
        end
    end

    User->>Template: Refine prompt template based on what worked
